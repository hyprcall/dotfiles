# ─────────────────────────────
#  Hypridle: lock → dpms off → suspend
#  Monitors: DP-1 (main), HDMI-A-1 (secondary)
# ─────────────────────────────

general {
    # Launch hyprlock if not already running
    lock_cmd = pidof hyprlock >/dev/null || hyprlock

    # Lock right before suspend to be safe
    before_sleep_cmd = hyprlock

    # Make sure screens wake cleanly after resume
    after_sleep_cmd = hyprctl dispatch dpms on
    ignore_dbus_inhibit = false
}

# 1) Auto-lock after 30 minutes
listener {
    timeout = 1800
    on-timeout = hyprlock
    on-resume = hyprctl dispatch dpms on
}

# 2) Turn off displays after 1 minute (DP-1 first)
listener {
    timeout = 1860
    on-timeout = hyprctl dispatch dpms off DP-1
    on-resume = hyprctl dispatch dpms on DP-1
}

# 3) Turn off HDMI-A-1 a second later (nice stagger to avoid pops)
listener {
    timeout = 1861
    on-timeout = hyprctl dispatch dpms off HDMI-A-1
    on-resume = hyprctl dispatch dpms on HDMI-A-1
}

# 4) Suspend after 1 hour (3600 seconds)
listener {
    timeout = 3600
    on-timeout = systemctl suspend
    on-resume = hyprctl dispatch dpms on
}
